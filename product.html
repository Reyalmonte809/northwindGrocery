<!DOCTYPE html>
<html lang="en">

<head>
    <title>NorthWind Groceries</title>
    <script src="./scripts/main.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="./styles/main.css">
</head>

<body>
    <nav class="navbar" id="navbar">
        <img src="./image/WhiteLogo (1).png" alt="logo">
        <a href="index.html">NorthWind</a>
        <a href="product.html">Products</a>
    </nav>
    <div class="selects" id="selects">
        <select class="selectElement" id="selectElement">
            <option class="categoryElement" id="categoryElement">Search by Category</option>
        </select>
        <select class="selectElement2" id="selectElement2">
            <option class="categoriesElement" id="categoriesElement">Categories</option>
        </select>
        <button class="detailsElement" id="detailsElement"><a href="details.html">Details About Item</a></button>
    </div>
    <footer>
        <p>
            &copy;<strong>ALCON</strong>
        </p>
    </footer>

    <script>
        catagories = [];

        function renderList(data) {
        catagories = data
            // for (d of data) {
            //     const option = document.createElement("option");
            //     categoryElement.innerText = d.name;
            //     selectElement.appendChild(option);
            // }
            selectElement.innerHTML = data.map(c=>
            `<option>${c.name}</option>`
            ).join("<br>")
        }
        fetch("http://localhost:8081/api/categories").then(r => r.json()).then(renderList);

        function secondList(datas){
            
            let categoryId = datas[0].categoryId;
            let combineList = datas.filter(p => p.categoryId == categoryId)
            selectElement2.innerHTML = combineList.map(d=>
            `<option>${d.productName}</option>`
        ).join("<br>")
    }
    fetch("http://localhost:8081/api/products").then(r=>r.json()).then(secondList);

        localStorage.details = d.productName;
    </script>

</body>

</html>